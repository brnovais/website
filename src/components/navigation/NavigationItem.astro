---
const pathname = new URL(Astro.request.url).pathname;

const { className, href } = Astro.props;
---

<navigation-item
  href={href}
  class:list={[
    'cursor-pointer rounded-lg p-2 font-montserrat',
    'hover:bg-dark-100 dark:hover:bg-light-800',
    pathname == href ? 'font-bold' : 'font-normal',
    className,
  ]}
>
  <slot />
</navigation-item>

<script>
  import { navigate } from 'astro:transitions/client';

  class NavigationItem extends HTMLElement {
    constructor() {
      super();
    }

    connectedCallback(): void {
      this.addEventListener('click', this.onClick);
    }

    disconnectedCallback(): void {
      this.removeEventListener('click', this.onClick);
    }

    onClick(event: MouseEvent): void {
      if (event.target == this) {
        const href: string = this.getAttribute('href');
        if (href != null) {
          return navigate(href);
        }

        for (const element: HTMLElement of this.children) {
          element.dispatchEvent(new MouseEvent('click'));
        }
      }
    }
  }

  customElements.define('navigation-item', NavigationItem);
</script>
